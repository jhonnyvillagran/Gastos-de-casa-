<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Gastos Pro - Mejorado (Tema Oscuro)</title>
    <!-- manifest.json y theme-color para PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1a1a2e">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); min-height: 100vh; color: #e0e0e0; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; margin-bottom: 30px; color: #e0e0e0; }
        .header h1 { font-size: 2.5rem; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
        .status-bar { background: rgba(26, 34, 46, 0.95); border-radius: 15px; padding: 20px; margin-bottom: 30px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); backdrop-filter: blur(10px); border: 1px solid rgba(50, 60, 80, 0.5); }
        .status-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; text-align: center; }
        .status-item { padding: 15px; border-radius: 10px; background: linear-gradient(135deg, #5f2c82 0%, #49a09d 100%); color: white; font-weight: bold; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .status-item.savings { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .status-item.remaining { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        .card { background: rgba(26, 34, 46, 0.95); border-radius: 15px; padding: 25px; margin-bottom: 25px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); backdrop-filter: blur(10px); border: 1px solid rgba(50, 60, 80, 0.5); }
        .card h2 { color: #a0a0a0; margin-bottom: 20px; font-size: 1.5rem; display: flex; align-items: center; gap: 10px; }
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .form-group { display: flex; flex-direction: column; }
        .form-group label { margin-bottom: 8px; font-weight: 600; color: #a0a0a0; }
        .form-group input, .form-group select { padding: 12px; border: 2px solid #3a475e; border-radius: 8px; font-size: 1rem; background-color: #2a334a; color: #e0e0e0; transition: border-color 0.3s ease; }
        .form-group input:focus, .form-group select:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3); }
        .btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 15px rgba(0,0,0,0.3); }
        .btn:active { transform: translateY(0); }
        .btn-success { background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); }
        .btn-danger { background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%); }
        .expense-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        .expense-table th, .expense-table td { padding: 12px; text-align: left; border-bottom: 1px solid #3a475e; color: #e0e0e0; }
        .expense-table th { background: #2a334a; font-weight: 600; color: #a0a0a0; }
        .expense-table tr:hover { background: #1e2738; }
        .loading { text-align: center; padding: 40px; color: #a0a0a0; }
        .error-message { background: #4a1e1e; color: #ff6b6b; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #e53e3e; }
        .success-message { background: #1e4a2a; color: #6bff9b; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #48bb78; }
        .sync-status { position: fixed; top: 20px; right: 20px; padding: 10px 15px; border-radius: 20px; background: rgba(26, 34, 46, 0.9); box-shadow: 0 4px 12px rgba(0,0,0,0.3); font-size: 0.9rem; font-weight: 600; color: #e0e0e0; z-index: 100; }
        .sync-status.syncing { background: #3a2a1e; color: #ffc107; }
        .sync-status.synced { background: #1e4a2a; color: #6bff9b; }
        .sync-status.error { background: #4a1e1e; color: #ff6b6b; }
        .sync-status.offline { background: #4a4a4a; color: #f0f0f0; }
        #daily-balance-info { background: #1e2738; color: #e0e0e0; }
        #daily-balance-info p strong { color: #a0a0a0; }
        @media (max-width: 768px) { .container { padding: 10px; } .header h1 { font-size: 2rem; } .form-grid, .status-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="sync-status" id="sync-status">üîÑ Conectando...</div>
    
    <div class="container">
        <div class="header"><h1>üí∞ Gestor de Gastos Pro</h1><p>Versi√≥n mejorada con sincronizaci√≥n completa</p></div>
        <div class="status-bar"><div class="status-grid"><div class="status-item savings"><div>Ahorro Total</div><div id="total-savings">0.00 UYU</div></div><div class="status-item"><div>Gastado (Mes)</div><div id="monthly-spent">0.00 UYU</div></div><div class="status-item remaining"><div>Sueldo Restante</div><div id="remaining-salary">0.00 UYU</div></div></div></div>
        <div class="card"><h2>‚öôÔ∏è Configuraci√≥n General</h2><div class="form-grid"><div class="form-group"><label for="monthly-salary">Sueldo Mensual (UYU)</label><input type="number" id="monthly-salary" placeholder="Ej: 40000"></div><div class="form-group"><label for="savings-percentage">Meta de Ahorro Autom√°tico (%)</label><input type="number" id="savings-percentage" placeholder="Ej: 10"></div><div class="form-group"><label for="usd-rate">1 D√≥lar (USD) = X Pesos (UYU)</label><input type="number" step="0.01" id="usd-rate" placeholder="Ej: 40.50"></div><div class="form-group"><label for="brl-rate">1 Real (BRL) = X Pesos (UYU)</label><input type="number" step="0.01" id="brl-rate" placeholder="Ej: 8.20"></div></div><button class="btn" onclick="app.saveSettings()">üíæ Guardar Configuraci√≥n</button></div>
        <div class="card"><h2>üí∏ Movimientos de Ahorro Manual</h2><div class="form-grid"><div class="form-group"><label for="savings-movement-amount">Monto (UYU)</label><input type="number" id="savings-movement-amount" placeholder="Ej: 200"></div><div class="form-group"><label for="savings-movement-type">Acci√≥n</label><select id="savings-movement-type"><option value="add">A√±adir al Ahorro</option><option value="subtract">Quitar del Ahorro</option></select></div></div><button class="btn btn-success" onclick="app.adjustManualSavings()">üí∞ Realizar Movimiento</button></div>
        <div class="card"><h2>‚ûï Nuevo Gasto</h2><div class="form-grid"><div class="form-group"><label for="expense-description">Descripci√≥n</label><input type="text" id="expense-description" placeholder="Ej: Caf√© y medialunas"></div><div class="form-group"><label for="expense-amount">Monto</label><input type="number" step="0.01" id="expense-amount" placeholder="Ej: 150"></div><div class="form-group"><label for="expense-currency">Moneda</label><select id="expense-currency"><option value="UYU">Pesos Uruguayos (UYU)</option><option value="USD">D√≥lar (USD)</option><option value="BRL">Reales (BRL)</option></select></div></div><button class="btn btn-success" onclick="app.addExpense()">üìù Agregar Gasto</button></div>
        <div class="card"><h2>üìä Balance Diario</h2><div class="form-group"><label for="daily-limit">L√≠mite de Gasto Diario (UYU)</label><input type="number" id="daily-limit" placeholder="Ej: 1000"></div><div id="daily-balance-info" style="margin-top: 15px; padding: 15px; background: #1e2738; border-radius: 8px;"><p><strong>Gastado hoy:</strong> <span id="today-spent">0.00 UYU</span></p><p><strong>L√≠mite diario:</strong> <span id="daily-limit-display">0.00 UYU</span></p><p><strong>Restante hoy:</strong> <span id="today-remaining">0.00 UYU</span></p></div></div>
        <div class="card"><h2>üìã Historial de Gastos</h2><div id="expense-history-loader" class="loading"><p>üîÑ Cargando gastos...</p></div><div id="expense-table-container" style="display: none;"><table class="expense-table" id="expense-table"><thead><tr><th>Fecha</th><th>Descripci√≥n</th><th>Monto Original</th><th>Moneda</th><th>Monto UYU</th><th>Acciones</th></tr></thead><tbody id="expense-table-body"></tbody></table></div></div>
    </div>

    <script>
        // =========================================================================
        //  CONFIGURACI√ìN PRINCIPAL
        // =========================================================================
        const CONFIG = {
            googleWebAppUrl: 'https://script.google.com/macros/s/AKfycbzvl7XbADb3KNc5ZO97x1oH3uowkoDnRZvAP8wx1Zwnk8tHc9oNyW_EOQS1rNPHM9T2Vg/exec',
            dbName: 'GestorGastosDB',
            dbVersion: 1
        };

        // =========================================================================
        //  MANEJADOR DE BASE DE DATOS LOCAL (IndexedDB)
        // =========================================================================
        class DBHelper {
            constructor() {
                this.db = null;
            }

            async connect() {
                return new Promise((resolve, reject) => {
                    if (this.db) return resolve(this.db);

                    const request = indexedDB.open(CONFIG.dbName, CONFIG.dbVersion);
                    request.onerror = (event) => reject("Error al abrir IndexedDB.");
                    request.onsuccess = (event) => {
                        this.db = event.target.result;
                        resolve(this.db);
                    };
                    request.onupgradeneeded = (event) => {
                        const db = event.target.result;
                        if (!db.objectStoreNames.contains('settings')) {
                            db.createObjectStore('settings', { keyPath: 'key' });
                        }
                        if (!db.objectStoreNames.contains('expenses')) {
                            db.createObjectStore('expenses', { keyPath: 'localId', autoIncrement: true });
                        }
                        if (!db.objectStoreNames.contains('sync_queue')) {
                            db.createObjectStore('sync_queue', { keyPath: 'localId' });
                        }
                    };
                });
            }
            
            async get(storeName, key) {
                const db = await this.connect();
                return new Promise((resolve, reject) => {
                    const transaction = db.transaction(storeName, 'readonly');
                    const store = transaction.objectStore(storeName);
                    const request = store.get(key);
                    request.onsuccess = () => resolve(request.result);
                    request.onerror = () => reject("Error al leer de la BD.");
                });
            }

            async getAll(storeName) {
                const db = await this.connect();
                return new Promise((resolve, reject) => {
                    const transaction = db.transaction(storeName, 'readonly');
                    const store = transaction.objectStore(storeName);
                    const request = store.getAll();
                    request.onsuccess = () => resolve(request.result);
                    request.onerror = () => reject("Error al leer todos los datos.");
                });
            }

            async set(storeName, value) {
                const db = await this.connect();
                return new Promise((resolve, reject) => {
                    const transaction = db.transaction(storeName, 'readwrite');
                    const store = transaction.objectStore(storeName);
                    const request = store.put(value);
                    request.onsuccess = () => resolve(request.result);
                    request.onerror = () => reject("Error al escribir en la BD.");
                });
            }

            async delete(storeName, key) {
                const db = await this.connect();
                return new Promise((resolve, reject) => {
                    const transaction = db.transaction(storeName, 'readwrite');
                    const store = transaction.objectStore(storeName);
                    const request = store.delete(key);
                    request.onsuccess = () => resolve();
                    request.onerror = () => reject("Error al eliminar de la BD.");
                });
            }
            
            async clear(storeName) {
                const db = await this.connect();
                return new Promise((resolve, reject) => {
                    const transaction = db.transaction(storeName, 'readwrite');
                    const store = transaction.objectStore(storeName);
                    const request = store.clear();
                    request.onsuccess = () => resolve();
                    request.onerror = () => reject("Error al limpiar la tabla.");
                });
            }
        }


        // =========================================================================
        //  CLASE PRINCIPAL DE LA APLICACI√ìN
        // =========================================================================
        class PersonalFinanceAppMejorado {
            constructor() {
                this.dbHelper = new DBHelper();
                this.expenses = [];
                this.settings = {
                    salary: 0, savingsPercentage: 10, dailyLimit: 0,
                    manualSavings: 0, usdToUyu: 40.0, brlToUyu: 8.0,
                };
                this.syncStatusEl = document.getElementById('sync-status');
            }

            async init() {
                this.registerServiceWorker();
                await this.loadData();
                this.updateUI();
                this.addOnlineStatusListener();
            }

            async loadData() {
                await this.loadSettingsFromLocal();
                await this.loadExpensesFromLocal();
                this.updateUI(); 

                await this.syncWithCloud();
            }

            async syncWithCloud() {
                if (!navigator.onLine) {
                    this.showSyncStatus('offline', 'üîå Modo Offline');
                    return;
                }
                this.showSyncStatus('syncing', 'üîÑ Sincronizando...');
                try {
                    await this.processSyncQueue();
                    
                    await this.loadSettingsFromCloud();
                    await this.fetchExpensesFromCloud();

                    this.showSyncStatus('synced', '‚úÖ Sincronizado');
                } catch (error) {
                    console.error("Error de sincronizaci√≥n:", error);
                    this.showSyncStatus('error', '‚ùå Error de Conexi√≥n');
                }
            }

            async loadSettingsFromLocal() {
                const savedSettings = await this.dbHelper.get('settings', 'userSettings');
                if (savedSettings) {
                    this.settings = savedSettings.value;
                }
                this.populateSettingsForm();
            }

            async loadSettingsFromCloud() {
                const response = await fetch(`${CONFIG.googleWebAppUrl}?action=getSettings`);
                const result = await response.json();
                if (result.status === 'success' && result.settings) {
                    this.settings = { ...this.settings, ...result.settings };
                    await this.dbHelper.set('settings', { key: 'userSettings', value: this.settings });
                    this.populateSettingsForm();
                    this.updateUI();
                } else { throw new Error('No se pudo cargar la configuraci√≥n de la nube'); }
            }

            async saveSettings() {
                this.settings.salary = parseFloat(document.getElementById('monthly-salary').value) || 0;
                this.settings.savingsPercentage = parseFloat(document.getElementById('savings-percentage').value) || 0;
                this.settings.dailyLimit = parseFloat(document.getElementById('daily-limit').value) || 0;
                this.settings.usdToUyu = parseFloat(document.getElementById('usd-rate').value) || 1;
                this.settings.brlToUyu = parseFloat(document.getElementById('brl-rate').value) || 1;

                await this.dbHelper.set('settings', { key: 'userSettings', value: this.settings });
                this.updateUI();
                this.showMessage('Configuraci√≥n guardada localmente.', 'success');

                await this.syncWithCloud().catch(e => console.error(e));
            }

            populateSettingsForm() {
                document.getElementById('monthly-salary').value = this.settings.salary || '';
                document.getElementById('savings-percentage').value = this.settings.savingsPercentage || '';
                document.getElementById('daily-limit').value = this.settings.dailyLimit || '';
                document.getElementById('usd-rate').value = this.settings.usdToUyu || '';
                document.getElementById('brl-rate').value = this.settings.brlToUyu || '';
            }

            async loadExpensesFromLocal() {
                this.expenses = await this.dbHelper.getAll('expenses');
                this.renderExpenseTable();
            }

            async fetchExpensesFromCloud() {
                const response = await fetch(CONFIG.googleWebAppUrl);
                const result = await response.json();
                if (result.status === 'success') {
                    await this.dbHelper.clear('expenses');
                    const cloudExpenses = result.data.map((row, index) => ({
                        cloudRowId: index + 2,
                        timestamp: new Date(row[0]),
                        description: row[1],
                        originalAmount: parseFloat(row[2]) || 0,
                        currency: row[3] || 'UYU',
                        amountUYU: parseFloat(row[4]) || 0
                    }));

                    for (const expense of cloudExpenses) {
                        await this.dbHelper.set('expenses', expense);
                    }
                    await this.loadExpensesFromLocal();
                    this.updateUI();
                } else { throw new Error('No se pudieron cargar los gastos de la nube'); }
            }
            
            async addExpense() {
                const description = document.getElementById('expense-description').value.trim();
                const amount = parseFloat(document.getElementById('expense-amount').value) || 0;
                const currency = document.getElementById('expense-currency').value;

                if (!description || amount <= 0) {
                    this.showMessage('Por favor, completa todos los campos.', 'error');
                    return;
                }

                const amountUYU = this.convertToUYU(amount, currency);
                const now = new Date();
                const newExpense = {
                    timestamp: now,
                    description: description,
                    originalAmount: amount,
                    currency: currency,
                    amountUYU: amountUYU
                };

                const localId = await this.dbHelper.set('expenses', newExpense);
                newExpense.localId = localId; 
                
                await this.dbHelper.set('sync_queue', {
                    localId: localId,
                    action: 'add',
                    payload: [now.toISOString(), description, amount, currency, amountUYU]
                });
                
                this.showMessage('Gasto agregado localmente.', 'success');
                await this.loadExpensesFromLocal();
                this.updateUI();

                document.getElementById('expense-description').value = '';
                document.getElementById('expense-amount').value = '';

                await this.syncWithCloud().catch(e => console.error(e));
            }

            async deleteExpense(localId, cloudRowId) {
                if (!confirm('¬øEst√°s seguro de eliminar este gasto?')) return;

                await this.dbHelper.delete('expenses', localId);
                await this.loadExpensesFromLocal();
                this.updateUI();
                this.showMessage('Gasto eliminado localmente.', 'success');

                if (cloudRowId) {
                    await this.dbHelper.set('sync_queue', {
                       localId: Date.now(), // Usar timestamp para clave √∫nica en cola de borrado
                       action: 'delete',
                       payload: cloudRowId
                    });
                } else {
                    // Si el gasto nunca fue sincronizado, simplemente se elimina de la cola de 'add'
                    await this.dbHelper.delete('sync_queue', localId);
                }
                
                await this.syncWithCloud().catch(e => console.error(e));
            }

            async processSyncQueue() {
                const queue = await this.dbHelper.getAll('sync_queue');
                if (queue.length === 0) return;

                // Procesar adiciones en un solo lote
                const additions = queue.filter(item => item.action === 'add');
                if (additions.length > 0) {
                    const dataToSend = additions.map(item => item.payload);
                    await this.sendDataToCloud({ action: 'syncOfflineExpenses', data: dataToSend });
                    for (const item of additions) {
                       await this.dbHelper.delete('sync_queue', item.localId);
                    }
                }
                
                // Procesar eliminaciones una por una
                const deletions = queue.filter(item => item.action === 'delete');
                for (const item of deletions) {
                    await this.sendDataToCloud({ action: 'deleteExpense', rowId: item.payload });
                    await this.dbHelper.delete('sync_queue', item.localId);
                }
            }

            async sendDataToCloud(data) {
                // Usamos 'no-cors' para el m√©todo POST a Apps Script desde un cliente,
                // ya que no devuelve una respuesta CORS-compatible. No esperamos una respuesta aqu√≠.
                await fetch(CONFIG.googleWebAppUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'text/plain;charset=utf-8' }, // Cambiado por compatibilidad
                    body: JSON.stringify(data),
                    mode: 'no-cors' 
                });
            }

            renderExpenseTable() {
                const tbody = document.getElementById('expense-table-body');
                tbody.innerHTML = '';
                document.getElementById('expense-history-loader').style.display = 'none';
                document.getElementById('expense-table-container').style.display = 'block';

                if (this.expenses.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="6" style="text-align: center;">No hay gastos registrados</td></tr>';
                    return;
                }

                const sorted = [...this.expenses].sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
                sorted.forEach(expense => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${new Date(expense.timestamp).toLocaleDateString('es-UY')}</td>
                        <td>${expense.description}</td>
                        <td>${expense.originalAmount.toFixed(2)}</td>
                        <td>${expense.currency}</td>
                        <td>${expense.amountUYU.toFixed(2)}</td>
                        <td>
                            <button class="btn btn-danger" style="padding: 5px 10px; font-size: 0.8rem;" 
                                    onclick="app.deleteExpense(${expense.localId}, ${expense.cloudRowId})">
                                üóëÔ∏è Eliminar
                            </button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            }

            updateUI() {
                const currentMonth = new Date().getMonth();
                const currentYear = new Date().getFullYear();
                const monthlyExpenses = this.expenses.filter(e => new Date(e.timestamp).getMonth() === currentMonth && new Date(e.timestamp).getFullYear() === currentYear);
                const monthlySpent = monthlyExpenses.reduce((sum, e) => sum + e.amountUYU, 0);
                const automaticSavings = (this.settings.salary * this.settings.savingsPercentage) / 100;
                const totalSavings = automaticSavings + (this.settings.manualSavings || 0);
                const remainingSalary = this.settings.salary - monthlySpent - automaticSavings;

                document.getElementById('total-savings').textContent = `${totalSavings.toFixed(2)} UYU`;
                document.getElementById('monthly-spent').textContent = `${monthlySpent.toFixed(2)} UYU`;
                document.getElementById('remaining-salary').textContent = `${remainingSalary.toFixed(2)} UYU`;

                const today = new Date().toDateString();
                const todayExpenses = this.expenses.filter(e => new Date(e.timestamp).toDateString() === today);
                const todaySpent = todayExpenses.reduce((sum, e) => sum + e.amountUYU, 0);
                const todayRemaining = this.settings.dailyLimit - todaySpent;

                document.getElementById('today-spent').textContent = `${todaySpent.toFixed(2)} UYU`;
                document.getElementById('daily-limit-display').textContent = `${this.settings.dailyLimit.toFixed(2)} UYU`;
                document.getElementById('today-remaining').textContent = `${todayRemaining.toFixed(2)} UYU`;
                document.getElementById('today-remaining').style.color = todayRemaining < 0 ? '#ff6b6b' : '#6bff9b';
            }
            
            convertToUYU(amount, currency) {
                if (currency === 'UYU') return amount;
                if (currency === 'USD') return amount * (this.settings.usdToUyu || 1);
                if (currency === 'BRL') return amount * (this.settings.brlToUyu || 1);
                return amount;
            }

            showMessage(message, type = 'info') {
                const existing = document.querySelector('.error-message, .success-message');
                if(existing) existing.remove();
                
                const messageEl = document.createElement('div');
                messageEl.className = type === 'error' ? 'error-message' : 'success-message';
                messageEl.textContent = message;
                document.querySelector('.header').insertAdjacentElement('afterend', messageEl);
                setTimeout(() => messageEl.remove(), 5000);
            }

            showSyncStatus(type, message) {
                this.syncStatusEl.className = `sync-status ${type}`;
                this.syncStatusEl.textContent = message;
            }

            registerServiceWorker() {
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.register('./service-worker.js')
                        .then(reg => console.log('Service Worker registrado', reg))
                        .catch(err => console.error('Error al registrar Service Worker', err));
                }
            }

            addOnlineStatusListener() {
                window.addEventListener('online', () => this.syncWithCloud());
                window.addEventListener('offline', () => this.showSyncStatus('offline', 'üîå Modo Offline'));
            }

            async adjustManualSavings() {
                const amount = parseFloat(document.getElementById('savings-movement-amount').value) || 0;
                const type = document.getElementById('savings-movement-type').value;
                if (amount <= 0) return;
                
                this.settings.manualSavings = (this.settings.manualSavings || 0) + (type === 'add' ? amount : -amount);
                await this.saveSettings();
                document.getElementById('savings-movement-amount').value = '';
            }
        }

        const app = new PersonalFinanceAppMejorado();
        document.addEventListener('DOMContentLoaded', () => {
            app.init();
        });
    </script>
</body>
</html>